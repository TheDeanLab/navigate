<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Analyzing Images via REST-API &mdash; navigate 0.0.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Reconfigurable Acquisitions Using Features" href="../features.html" />
    <link rel="prev" title="Acquiring Data" href="../acquiring_guide.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            navigate
              <img src="../../_static/mic.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_installation.html">Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i_want_to.html">I Want To…</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../hardware_overview.html">Supported Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gui_walkthrough.html">User Interface Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="../setup_microscope.html">Setting Up A Microscope</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../acquiring_home.html">Acquiring Data</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../acquiring_guide.html">Acquiring Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Analyzing Images via REST-API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-navigate-ilastik-server">Install navigate-ilastik server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-navigate-ilastik-server">Run navigate-ilastik-server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-rest-api-configuration">Set REST-API configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-and-set-ilastik-project">Load and set ilastik project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-ilastik-feature">Use ilastik feature</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../features.html">Reconfigurable Acquisitions Using Features</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Analyzing Images via REST-API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-navigate-ilastik-server">Install navigate-ilastik server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-navigate-ilastik-server">Run navigate-ilastik-server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#set-rest-api-configuration">Set REST-API configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-and-set-ilastik-project">Load and set ilastik project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-ilastik-feature">Use ilastik feature</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../case_studies/case_studies_home.html">Case Studies</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/software_architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/contributing_guidelines.html">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/feature_container.html">Feature Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin/plugin_home.html">Plugin Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">navigate</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../acquiring_home.html">Acquiring Data</a></li>
      <li class="breadcrumb-item active">Analyzing Images via REST-API</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user_guide/REST-apis/ilastik_segmentation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="analyzing-images-via-rest-api">
<h1>Analyzing Images via REST-API<a class="headerlink" href="#analyzing-images-via-rest-api" title="Permalink to this heading"></a></h1>
<p><strong>navigate</strong> has the ability to communicate with other image analysis software through REST-API interfaces.
In general, the REST-API is used to communicate with software that has different or conflicting
dependencies with the <strong>navigate</strong> codebase. Data is transferred via HTTP requests and responses,
which is faster and more efficient than locally saving the data and then loading it into another
piece of software, but slower than direct access of an address in memory.</p>
<p>Here is an example using <a class="reference external" href="https://www.nature.com/articles/s41592-019-0582-9">ilastik</a> to segment
images and mark positions for higher resolution in a multiscale
microscope. ilastik is a powerful image analysis software that enables users to train
a support vector machine learning classifier to segment images using a combination of
intensity, texture, and shape features. More information about ilastik can be found
<a class="reference external" href="https://www.ilastik.org/">here</a>.</p>
<section id="install-navigate-ilastik-server">
<h2>Install navigate-ilastik server<a class="headerlink" href="#install-navigate-ilastik-server" title="Permalink to this heading"></a></h2>
<p>Install ilastik first and then follow the steps below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">your</span><span class="o">-</span><span class="n">ilastik</span><span class="o">-</span><span class="n">environment</span>
<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span>
<span class="n">mkdir</span> <span class="o">~/</span><span class="n">Git</span><span class="o">/</span>
<span class="n">cd</span> <span class="o">~/</span><span class="n">Git</span><span class="o">/</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">TheDeanLab</span><span class="o">/</span><span class="n">navigate</span><span class="o">-</span><span class="n">ilastik</span><span class="o">-</span><span class="n">server</span>
<span class="n">cd</span> <span class="n">navigate</span><span class="o">-</span><span class="n">ilastik</span><span class="o">-</span><span class="n">server</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p>Visit <a class="reference external" href="https://github.com/TheDeanLab/navigate-ilastik-server">navigate-ilastik-server</a> for more information.</p>
</section>
<section id="run-navigate-ilastik-server">
<h2>Run navigate-ilastik-server<a class="headerlink" href="#run-navigate-ilastik-server" title="Permalink to this heading"></a></h2>
<p>In the conda environment command window, go to the folder “navigate-ilastik-server”, run the command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flask</span> <span class="o">--</span><span class="n">app</span> <span class="n">navigate_server</span> <span class="n">run</span>
</pre></div>
</div>
<p>If ilastik server runs on a different machine, run the command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">flask</span> <span class="o">--</span><span class="n">app</span> <span class="n">navigate_server</span> <span class="n">run</span> <span class="o">--</span><span class="n">host</span> <span class="mf">0.0.0.0</span>
</pre></div>
</div>
<p>If want to specify a specific port, add parameter <code class="docutils literal notranslate"><span class="pre">--port</span> <span class="pre">port-number</span></code>.</p>
</section>
<section id="set-rest-api-configuration">
<h2>Set REST-API configuration<a class="headerlink" href="#set-rest-api-configuration" title="Permalink to this heading"></a></h2>
<p>Specify url address of the ilastik server in the configuration file (.navigate/config/rest_api_config.yml).
If the ilastik server runs on the same machine as navigate, set the configuration as follow:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ilastik</span><span class="p">:</span>
<span class="n">url</span><span class="p">:</span> <span class="s1">&#39;http://127.0.0.1:5000/ilastik&#39;</span>
</pre></div>
</div>
<p>If the ilastik server runs on a different machine, set the configuration as follow:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ilastik</span><span class="p">:</span>
<span class="n">url</span><span class="p">:</span> <span class="s1">&#39;http://remote-url:5000/ilastik&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As shown here, the default port is 5000. If another port is used, provide it here.</p>
</div>
</section>
<section id="load-and-set-ilastik-project">
<h2>Load and set ilastik project<a class="headerlink" href="#load-and-set-ilastik-project" title="Permalink to this heading"></a></h2>
<ol class="arabic">
<li><p>Select and click menu <span class="menuselection">Features ‣ ilastik Settings</span>.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ilastik_1.png"><img alt="../../_images/ilastik_1.png" class="align-center" src="../../_images/ilastik_1.png" style="width: 400px;" /></a>
</div></blockquote>
</li>
<li><p>Load one ilastik segmentation project file from the pop-up window</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ilastik_2.png"><img alt="../../_images/ilastik_2.png" class="align-center" src="../../_images/ilastik_2.png" style="width: 400px;" /></a>
<a class="reference internal image-reference" href="../../_images/ilastik_3.png"><img alt="../../_images/ilastik_3.png" class="align-center" src="../../_images/ilastik_3.png" style="width: 400px;" /></a>
</div></blockquote>
</li>
<li><p>Select target labels and the way to use the segmentation (display or mark positions), then click <span class="guilabel">Confirm</span>.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ilastik_5.png"><img alt="../../_images/ilastik_5.png" class="align-center" src="../../_images/ilastik_5.png" style="width: 400px;" /></a>
</div></blockquote>
</li>
</ol>
</section>
<section id="use-ilastik-feature">
<h2>Use ilastik feature<a class="headerlink" href="#use-ilastik-feature" title="Permalink to this heading"></a></h2>
<ol class="arabic">
<li><p>Choose <span class="guilabel">Customize</span> acquisition mode, and select the menu <span class="menuselection">Features ‣ ilastik Segmentation</span>.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ilastik_6.png"><img alt="../../_images/ilastik_6.png" class="align-center" src="../../_images/ilastik_6.png" style="width: 400px;" /></a>
</div></blockquote>
</li>
<li><p>Click <span class="guilabel">Acquire</span> to run acquisition.</p></li>
</ol>
<p>If you choose to show segmentation only, click <span class="guilabel">Confirm</span> in the popup window directly.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ilastik_7.png"><img alt="../../_images/ilastik_7.png" class="align-center" src="../../_images/ilastik_7.png" style="width: 400px;" /></a>
<a class="reference internal image-reference" href="../../_images/ilastik_9.png"><img alt="../../_images/ilastik_9.png" class="align-center" src="../../_images/ilastik_9.png" style="width: 400px;" /></a>
</div></blockquote>
<p>If you choose to <span class="guilabel">Mark Position</span>, please click <span class="guilabel">ilastik</span> in the pop-up window and set the target microscope name and zoom value.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ilastik_10.png"><img alt="../../_images/ilastik_10.png" class="align-center" src="../../_images/ilastik_10.png" style="width: 400px;" /></a>
<a class="reference internal image-reference" href="../../_images/ilastik_8.png"><img alt="../../_images/ilastik_8.png" class="align-center" src="../../_images/ilastik_8.png" style="width: 400px;" /></a>
</div></blockquote>
<p>The positions will be populated to the multi-position table.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ilastik_11.png"><img alt="../../_images/ilastik_11.png" class="align-center" src="../../_images/ilastik_11.png" style="width: 400px;" /></a>
</div></blockquote>
<p>The positions looks like the following if saves it in a CSV file.</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/ilastik_12.png"><img alt="../../_images/ilastik_12.png" class="align-center" src="../../_images/ilastik_12.png" style="width: 400px;" /></a>
<a class="reference internal image-reference" href="../../_images/ilastik_13.png"><img alt="../../_images/ilastik_13.png" class="align-center" src="../../_images/ilastik_13.png" style="width: 400px;" /></a>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../acquiring_guide.html" class="btn btn-neutral float-left" title="Acquiring Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../features.html" class="btn btn-neutral float-right" title="Reconfigurable Acquisitions Using Features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Dean Lab, UT Southwestern Medical Center.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>