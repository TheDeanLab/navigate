<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration Overview &mdash; navigate 0.0.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Multiple Cameras" href="multiple_cameras.html" />
    <link rel="prev" title="Setting Up A Microscope" href="setup_microscope.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            navigate
              <img src="../_static/mic.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_installation.html">Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i_want_to.html">I Want To…</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hardware/hardware_home.html">Supported Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_formats.html">Supported File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_walkthrough.html">User Interface Walkthrough</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="setup_microscope.html">Setting Up A Microscope</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configuration Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initial-configuration">Initial Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-wizard">Configuration Wizard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#manual-configuration">Manual Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#microscope-configurations">Microscope Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#microscope-inheritance">Microscope Inheritance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#microscope-hardware-specification">Microscope Hardware Specification</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#experiment-file">Experiment File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#waveform-constants-file">Waveform Constants File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#waveform-templates-file">Waveform Templates File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rest-api-configuration-file">Rest API Configuration File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="multiple_cameras.html">Multiple Cameras</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="acquiring_home.html">Acquiring Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="case_studies/case_studies_home.html">Case Studies</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/software_architecture.html">Software Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/contributing_guidelines.html">Contributing Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/feature_container.html">Feature Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="restapi.html">REST-API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugin/plugin_home.html">Plugin Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugins</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-plugin-template">navigate Plugin Template</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-confocal-projection">navigate Confocal Projection Plugin</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-at-scale">navigate at Scale</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-mmcore-plugin">navigate MMCore Plugin</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TheDeanLab/navigate-ilastik-server">navigate ilastik Server</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../implementations/implementations.html">Implemented Microscopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Software API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">navigate</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="setup_microscope.html">Setting Up A Microscope</a></li>
      <li class="breadcrumb-item active">Configuration Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user_guide/software_configuration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration-overview">
<h1>Configuration Overview<a class="headerlink" href="#configuration-overview" title="Permalink to this heading"></a></h1>
<p>This section outlines the <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">experiment.yml</span></code>,
<code class="docutils literal notranslate"><span class="pre">rest_api_config.yml</span></code>, <code class="docutils literal notranslate"><span class="pre">waveform_templates.yml</span></code>, and
<code class="docutils literal notranslate"><span class="pre">waveform_constants.yml</span></code> files.</p>
<hr class="docutils" />
<section id="initial-configuration">
<h2>Initial Configuration<a class="headerlink" href="#initial-configuration" title="Permalink to this heading"></a></h2>
<p>In order for the <strong>navigate</strong> software to function, you will need to configure the
specifications of the various hardware that you will be using in the
<code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file.</p>
<p>An example <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file is provided in the
<code class="docutils literal notranslate"><span class="pre">navigate\config</span></code> directory. However, to avoid conflicts between different
microscopes after pulling new changes from GitHub, <strong>navigate</strong> by default
loads a local version of the <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file. This file is
stored in the <code class="docutils literal notranslate"><span class="pre">C:\Users\Username\AppData\Local\.navigate\config</span></code> directory
on Windows or <code class="docutils literal notranslate"><span class="pre">~/.navigate</span></code> on Mac/Linux.</p>
<hr class="docutils" />
<section id="configuration-wizard">
<h3>Configuration Wizard<a class="headerlink" href="#configuration-wizard" title="Permalink to this heading"></a></h3>
<p>To help you set up your configuration file, we have created a configuration wizard
that will guide you through the process of creating your
<code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file. To launch the configuration wizard, open your
Terminal or Anaconda Prompt, activate your <strong>navigate</strong> Python environment
and launch the software by typing: <code class="docutils literal notranslate"><span class="pre">navigate</span> <span class="pre">-c</span></code>.</p>
<blockquote>
<div><a class="reference internal image-reference" href="user_guide/images/configurator.png"><img alt="user_guide/images/configurator.png" class="align-center" src="user_guide/images/configurator.png" style="width: 400px;" /></a>
</div></blockquote>
<p>The configuration wizard provides a convenient way for configuring your
hardware. For each microscope, which can be renamed or deleted by
right-clicking on the microscope tab, you will be asked to specify the
hardware that you are using. Each hardware type is listed as its own
independent tab, and required parameters are shown on the left column, a
field for the parameter is shown in the middle, and an example of the
parameter is shown on the right.</p>
<p>Additional microscope instances can be added by clicking the
<span class="guilabel">Add A Microscope</span> button. Should one want to start from scratch, the
<span class="guilabel">New Configuration</span> button will clear the current configuration.
If you have a configuration that you would like to modify, you can load it by
clicking the <span class="guilabel">Load Configuration</span> button. Once you have completed
the configuration, you can save it by clicking the <span class="guilabel">Save</span> button.
For <strong>navigate</strong> to use the configuration file by default, it should be
saved as <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> in the following directory, depending upon
your operating system:
* Windows: <code class="docutils literal notranslate"><span class="pre">C:\Users\Username\AppData\Local\.navigate\config</span></code>
* Mac/Linux: <code class="docutils literal notranslate"><span class="pre">~/.navigate</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The configuration wizard is actively being developed, and may not support
every device type or configuration option. If you encounter any issues
with the configuration wizard, please let us know by creating an issue on
<a class="reference external" href="https://github.com/TheDeanLab/navigate/issues/new/choose">GitHub</a>..</p>
</div>
</section>
<hr class="docutils" />
<section id="manual-configuration">
<h3>Manual Configuration<a class="headerlink" href="#manual-configuration" title="Permalink to this heading"></a></h3>
<p>If you prefer to manually configure your <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file, we
recommend launching the software in the synthetic hardware mode initially.
Within your Terminal, or Anaconda Prompt, activate your <strong>navigate</strong>
Python environment and launch the software in the synthetic hardware mode by
typing: <code class="docutils literal notranslate"><span class="pre">navigate</span> <span class="pre">-sh</span></code>.</p>
<p>Upon launching the software in the synthetic hardware mode, <strong>navigate</strong> will
create a copy of the <code class="docutils literal notranslate"><span class="pre">navigate\config\configuration.yaml</span></code> file in
<code class="docutils literal notranslate"><span class="pre">C:\Users\Username\AppData\Local\.navigate\config</span></code> on  Windows or <code class="docutils literal notranslate"><span class="pre">~/</span>
<span class="pre">.navigate</span></code> on Mac/Linux.</p>
<p>Thereafter, you should only modify the <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file in your
local <code class="docutils literal notranslate"><span class="pre">.navigate\config</span></code> directory.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Once <strong>navigate</strong> is open in the synthetic hardware mode, you can open the
<code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file by going to <span class="menuselection">File</span> menu and selecting
<a class="reference internal" href="gui_walkthrough.html#file"><span class="std std-ref">Open Configuration Files</span></a>.</p>
</div>
<p>It may help to open
<code class="docutils literal notranslate"><span class="pre">C:\Users\Username\AppData\Local\.navigate\config\configuration.yaml</span></code> and follow
along in this file when reading the next sections.</p>
<p>See the <a class="reference internal" href="case_studies/setup_voodoo.html#setup-aslm"><span class="std std-ref">Setting up an Axially Swept Light-Sheet Microscope</span></a> case
study for a general walkthrough of how to build your own configuration file and see
<span class="xref std std-doc">Implementations</span> for examples of configuration files.</p>
</section>
<hr class="docutils" />
<section id="microscope-configurations">
<h3>Microscope Configurations<a class="headerlink" href="#microscope-configurations" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file contains the microscope configurations
that you will be using with the software. Each microscope is represented as a YAML
dictionary.</p>
<p>Switching between each microscope is readily performed in <strong>navigate</strong>,
enabling you to switch between different configurations or imaging modes,
each with their own unique or shared hardware:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">microscopes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">microscope1</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="nt">microscope2</span><span class="p">:</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">microscope1</span></code> and <code class="docutils literal notranslate"><span class="pre">microscope2</span></code> are names of two different
microscopes using different combinations of the hardware. The names of
the microscopes must not include spaces or special characters such as <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">\</span></code>,
<code class="docutils literal notranslate"><span class="pre">#</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code>, or <code class="docutils literal notranslate"><span class="pre">?</span></code>.</p>
</section>
<section id="microscope-inheritance">
<h3>Microscope Inheritance<a class="headerlink" href="#microscope-inheritance" title="Permalink to this heading"></a></h3>
<p>When setting up a <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> file with multiple microscopes, the
file can grow quite large and repetitive, especially if the microscopes share
many of the same hardware components. To avoid this, <strong>navigate</strong> allows for
inheritance of hardware components from one microscope to another. In the
following example, <code class="docutils literal notranslate"><span class="pre">microscope2</span></code> inherits all of the hardware components
from <code class="docutils literal notranslate"><span class="pre">microscope1</span></code> except for the camera, since this is specified in the
<code class="docutils literal notranslate"><span class="pre">microscope2</span></code> section.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">microscopes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">microscope1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">camera</span><span class="p">:</span>
<span class="w">            </span><span class="nt">hardware</span><span class="p">:</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HamamatsuOrca</span>
<span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="nt">microscope2(microscope1)</span><span class="p">:</span>
<span class="w">        </span><span class="nt">camera</span><span class="p">:</span>
<span class="w">            </span><span class="nt">hardware</span><span class="p">:</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HamamatsuFusion</span>
<span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="microscope-hardware-specification">
<h3>Microscope Hardware Specification<a class="headerlink" href="#microscope-hardware-specification" title="Permalink to this heading"></a></h3>
<p>Each microscope is expected to have a <code class="docutils literal notranslate"><span class="pre">daq</span></code>, <code class="docutils literal notranslate"><span class="pre">camera</span></code>, <code class="docutils literal notranslate"><span class="pre">remote_focus_device</span></code>,
<code class="docutils literal notranslate"><span class="pre">galvo</span></code>, <code class="docutils literal notranslate"><span class="pre">filter_wheel</span></code>, <code class="docutils literal notranslate"><span class="pre">stage</span></code>, <code class="docutils literal notranslate"><span class="pre">zoom</span></code>, <code class="docutils literal notranslate"><span class="pre">shutter</span></code>, <code class="docutils literal notranslate"><span class="pre">mirror</span></code> and
<code class="docutils literal notranslate"><span class="pre">lasers</span></code> section of the YAML dictionary. As in the hardware section, unused devices
can be specified as synthetic.</p>
<p>Most of the information to set up these devices can be found in the
<span class="xref std std-doc">Supported Hardware</span> section of the documentation.
Additional explanations of a few specific sections of the microscope configuration are
below. Notably, the <code class="docutils literal notranslate"><span class="pre">zoom</span></code> section of the <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> specifies effective
pixel size.</p>
<section id="stage-subsection">
<h4>Stage Subsection<a class="headerlink" href="#stage-subsection" title="Permalink to this heading"></a></h4>
<p>The stage section of the microscope 1) puts the stage control from the <code class="docutils literal notranslate"><span class="pre">hardware</span></code>
section into the microscope 2) sets boundaries for stage movement and 3) optionally
specifies joystick-controlled axes.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">microscopes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">microscope1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">stage</span><span class="p">:</span>
<span class="w">            </span><span class="nt">hardware</span><span class="p">:</span>
<span class="w">              </span><span class="p p-Indicator">-</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stage</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ASI</span>
<span class="w">                </span><span class="nt">serial_number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">123456789</span>
<span class="w">                </span><span class="nt">axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">y</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">z</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">f</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># Software</span>
<span class="w">                </span><span class="nt">axes_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">M</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Y</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">X</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">Z</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># M Shear axis mapping</span>

<span class="w">              </span><span class="p p-Indicator">-</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stage</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SyntheticStage</span>
<span class="w">                </span><span class="nt">serial_number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">987654321</span>
<span class="w">                </span><span class="nt">axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">theta</span><span class="p p-Indicator">]</span>

<span class="w">        </span><span class="nt">joystick_axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">y</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">z</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">x_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
<span class="w">        </span><span class="nt">x_min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-100000</span>
<span class="w">        </span><span class="nt">y_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
<span class="w">        </span><span class="nt">y_min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-100000</span>
<span class="w">        </span><span class="nt">z_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
<span class="w">        </span><span class="nt">z_min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-100000</span>
<span class="w">        </span><span class="nt">f_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100000</span>
<span class="w">        </span><span class="nt">f_min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-100000</span>
<span class="w">        </span><span class="nt">theta_max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">360</span>
<span class="w">        </span><span class="nt">theta_min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">        </span><span class="nt">x_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="nt">y_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="nt">z_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="nt">theta_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="nt">f_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="w">        </span><span class="nt">flip_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">flip_y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">flip_z</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">        </span><span class="nt">flip_f</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</pre></div>
</div>
<p>First, we set the axes controlled by each piece of hardware and a mapping from the
hardware’s API axes to our software’s axes. For example, the ASI <code class="docutils literal notranslate"><span class="pre">M</span></code> axis is mapped
onto our software’s <code class="docutils literal notranslate"><span class="pre">X</span></code> axis below.</p>
<p>For <code class="docutils literal notranslate"><span class="pre">stages</span></code>, <strong>navigate</strong> requires that stages are configured for each microscope
in <code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code>, <code class="docutils literal notranslate"><span class="pre">Z</span></code>, <code class="docutils literal notranslate"><span class="pre">F</span></code>, and <code class="docutils literal notranslate"><span class="pre">Theta</span></code>. If no physical stage is present, then
that axes should be defined as a <code class="docutils literal notranslate"><span class="pre">SyntheticStage</span></code>, as shown above for <code class="docutils literal notranslate"><span class="pre">Theta</span></code>.</p>
<p>Below this, we specify that only <code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code> and <code class="docutils literal notranslate"><span class="pre">Z</span></code> axes may be controlled by a
joystick and we set the stage bounds for each of the axes.</p>
<p>Below this, we set the minimum and maximum values for each axis. This can be used to
set boundaries that prevent the stage from crashing into the sides of a chamber.</p>
<p>Below this, we set the offset for each stage axis. This is an offset relative to other
microscopes (e.g. <code class="docutils literal notranslate"><span class="pre">microscope2</span></code>) specified in <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code>. In this case,
<code class="docutils literal notranslate"><span class="pre">microscope1</span></code> is the reference microscope. Additional microscopes may ask the stage
to move to a different offset in order to observe the sample at the same position as
<code class="docutils literal notranslate"><span class="pre">microscope1</span></code>.</p>
<p>Finally, we set the flip flags. These are important for getting
<a class="reference internal" href="gui_walkthrough.html#multiposition"><span class="std std-ref">multiposition</span></a> acquisitions to
run properly. We set a convention in the software to expect that increasing value along
an axis brings the sample further into our field of view. That is, increasing the
x-axis position should bring the sample further to the right in the frame (in the case
<a class="reference internal" href="gui_walkthrough.html#lut"><span class="std std-ref">Flip XY</span></a> is toggled on) and increasing the
y-axis position should bring the sample down. Increasing the z-position should bring
the sample closer to the objective. If the stage behaves the opposite of any of these
ways, it is prudent to set the flip flag. If set properly, the calculations for moving
through multiple positions will be performed correctly. These only need to be
configured once when setting up the microscope.</p>
</section>
<hr class="docutils" />
<section id="stage-axes-definition">
<h4>Stage Axes Definition<a class="headerlink" href="#stage-axes-definition" title="Permalink to this heading"></a></h4>
<p>Many times, the coordinate system of the stage hardware do not agree with the optical
definition of each axes identity. For example, many stages define their vertical
dimension as <code class="docutils literal notranslate"><span class="pre">Z</span></code>, whereas optically, we often define this axis as <code class="docutils literal notranslate"><span class="pre">X</span></code>. Thus, there
is often a need to map the mechanical axes to the optical axes, and this is done with
the <code class="docutils literal notranslate"><span class="pre">axes_mapping</span></code> dictionary entry in the stage hardware section. By default, stage
axes are read in as <code class="docutils literal notranslate"><span class="pre">X</span></code>, <code class="docutils literal notranslate"><span class="pre">Y</span></code>, <code class="docutils literal notranslate"><span class="pre">Z</span></code>, <code class="docutils literal notranslate"><span class="pre">Theta</span></code>, <code class="docutils literal notranslate"><span class="pre">F</span></code>, where <code class="docutils literal notranslate"><span class="pre">Theta</span></code> is rotation
and <code class="docutils literal notranslate"><span class="pre">F</span></code> is focus, but this can be changed by changing axes mapping.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">y</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">z</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">theta</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">f</span><span class="p p-Indicator">]</span>
<span class="nt">axes_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">y</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">z</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">r</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">f</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>If, on a certain microscope, the <code class="docutils literal notranslate"><span class="pre">Z</span></code> stage axis corresponds to the optical Y-axis,
and vice versa, you would then have to import the stages as following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">y</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">z</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">theta</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">f</span><span class="p p-Indicator">]</span>
<span class="nt">axes_mapping</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">z</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">y</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">r</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">f</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="joystick-axes-definition">
<h4>Joystick Axes Definition<a class="headerlink" href="#joystick-axes-definition" title="Permalink to this heading"></a></h4>
<p>If you are using a joystick, it is possible to disable GUI control of the stage axes
that the joystick can interact with. The axes that the joystick can interact with
appear in the stage field as following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">joystick_axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">x</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">y</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">z</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These axes should agree with the optical axes. If, on the same microscope
as mentioned in the <a class="reference internal" href="#stage-axes-definition"><span class="std std-ref">Stage Axes Definition</span></a>
section, the joystick were to control the optical y-axis corresponding to
the stage z axis, you would have to put <code class="docutils literal notranslate"><span class="pre">Y</span></code> in the joystick axes brackets
as following:</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">joystick_axes</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">y</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="zoom-subsection">
<h4>Zoom Subsection<a class="headerlink" href="#zoom-subsection" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">zoom</span></code> section of <code class="docutils literal notranslate"><span class="pre">configuration.yaml</span></code> specifies control over microscope
zoom lenses, or devices that change the magnifcation of the imaging system. For
example, we use the <a class="reference external" href="https://www.dynamixel.com/">Dynamixel Smart Actuator</a> to
control the rotating zoom wheel on an Olympus MVXPLAPO 1x/0.25.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">microscopes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">microscope1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">zoom</span><span class="p">:</span>
<span class="w">            </span><span class="nt">hardware</span><span class="p">:</span>
<span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zoom</span>
<span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DynamixelZoom</span>
<span class="w">                </span><span class="nt">servo_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">            </span><span class="nt">position</span><span class="p">:</span>
<span class="w">                </span><span class="nt">0.63x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">                </span><span class="nt">1x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">627</span>
<span class="w">                </span><span class="nt">2x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1711</span>
<span class="w">                </span><span class="nt">3x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2301</span>
<span class="w">                </span><span class="nt">4x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2710</span>
<span class="w">                </span><span class="nt">5x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3079</span>
<span class="w">                </span><span class="nt">6x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3383</span>
<span class="w">            </span><span class="nt">pixel_size</span><span class="p">:</span>
<span class="w">                </span><span class="nt">0.63x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9.7</span>
<span class="w">                </span><span class="nt">1x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6.38</span>
<span class="w">                </span><span class="nt">2x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.14</span>
<span class="w">                </span><span class="nt">3x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.12</span>
<span class="w">                </span><span class="nt">4x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.609</span>
<span class="w">                </span><span class="nt">5x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.255</span>
<span class="w">                </span><span class="nt">6x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.044</span>
<span class="w">            </span><span class="nt">stage_positions</span><span class="p">:</span>
<span class="w">                </span><span class="nt">BABB</span><span class="p">:</span>
<span class="w">                    </span><span class="nt">f</span><span class="p">:</span>
<span class="w">                        </span><span class="nt">0.63x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">                        </span><span class="nt">1x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">                        </span><span class="nt">2x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">                        </span><span class="nt">3x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">                        </span><span class="nt">4x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">                        </span><span class="nt">5x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">                        </span><span class="nt">6x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">positions</span></code> specify the voltage of the actuator at different zoom positions.
The <code class="docutils literal notranslate"><span class="pre">pixel_size</span></code> specifies the effective pixel size of the system at each zoom. The
<code class="docutils literal notranslate"><span class="pre">stage_positions</span></code> account for focal shifts in between the different zoom values
(the MVXPLAPO does not have a consistent focal plane). These may change depending on
the immersion media. Here it is specified for a <code class="docutils literal notranslate"><span class="pre">BABB</span></code> (Benzyl Alcohol Benzyl
Benzoate) immersion media.</p>
<p>Regardless of whether or not your microscope uses a zoom device, you must have a
<code class="docutils literal notranslate"><span class="pre">zoom</span></code> entry, indicating the effective pixel size of your system in micrometers.
For example,</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">zoom</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hardware</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zoom</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SyntheticZoom</span>
<span class="w">    </span><span class="nt">servo_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">position</span><span class="p">:</span>
<span class="w">    </span><span class="nt">N/A</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="nt">pixel_size</span><span class="p">:</span>
<span class="w">    </span><span class="nt">N/A</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.168</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="experiment-file">
<h2>Experiment File<a class="headerlink" href="#experiment-file" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">experiment.yml</span></code> file stores information about the current state of the program.
This includes laser and camera parameters, saving options, z-stack settings and much
more. This file does not need to be edited by the user. The program will update it
automatically and save changes automatically on exit.</p>
</section>
<hr class="docutils" />
<section id="waveform-constants-file">
<h2>Waveform Constants File<a class="headerlink" href="#waveform-constants-file" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">waveform_constants.yml</span></code> file stores the waveform parameters that can be edited
by going to <span class="menuselection">Microscope Configuration ‣ Waveform Parameters</span>. This
file does not need to be edited by the user. The program will update it automatically
and save changes automatically on exit.</p>
</section>
<hr class="docutils" />
<section id="waveform-templates-file">
<h2>Waveform Templates File<a class="headerlink" href="#waveform-templates-file" title="Permalink to this heading"></a></h2>
<p>The waveform templates file stores default behavior for the number of repeats for
specific waveforms. This file only needs to be edited if the user wishes to introduce
a new waveform behavior to the application.</p>
</section>
<hr class="docutils" />
<section id="rest-api-configuration-file">
<h2>Rest API Configuration File<a class="headerlink" href="#rest-api-configuration-file" title="Permalink to this heading"></a></h2>
<p>The REST API configuration file specifies where the REST API should look to get
and post data. This is only needed if you are using a plugin that requires the
REST API, such as our communication with <a class="reference external" href="https://www.ilastik.org">ilastik</a>. More
information on how to setup the REST API for communication with ilastik can be found
<span class="xref std std-doc">here</span>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="setup_microscope.html" class="btn btn-neutral float-left" title="Setting Up A Microscope" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="multiple_cameras.html" class="btn btn-neutral float-right" title="Multiple Cameras" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Dean Lab, UT Southwestern Medical Center.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>